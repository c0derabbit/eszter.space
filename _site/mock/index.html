<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mocking React components with props</title>
    <meta name="description" content="">
    <link rel="alternate" href="." type="application/atom+xml" title="">
    <link rel="alternate" href="." type="application/json" title="">
  </head>
  <body>
    <header>
      <h1><a href="/"></a></h1>
    </header>

    <main>
      <h1>Mocking React components with props</h1>

<p>In many cases, particularly in <a href="https://www.gatsbyjs.org/">Gatsby</a>, pages are wrapped in a <code>&lt;Layout&gt;</code> component. Today, Iʼll describe a way to test these pages isolated from their wrapper.</p>
<p>A <code>&lt;Layout&gt;</code> component might look something like this simplified specimen:</p>
<pre><code class="language-jsx">export default function Layout({ children }) {
  return (
    &lt;div&gt;
      &lt;SiteHeader /&gt;
      &lt;main&gt;{children}&lt;/main&gt;
      &lt;SiteFooter /&gt;
    &lt;/div&gt;
  );  
}
</code></pre>
<p>As an example, letʼs write a simple 404 page.</p>
<pre><code class="language-js">export default function NotFound() {
  return (
    &lt;Layout&gt;
      Sorry, this page does not exist. :(
    &lt;/Layout&gt;
  );  
}
</code></pre>
<p>A test for our 404 page might look like the following, using <a href="https://jestjs.io/">Jest</a> and <a href="https://github.com/kentcdodds/react-testing-library">react-testing-library</a>:</p>
<pre><code class="language-js">describe('Not Found page', () =&gt; {
  it('shows a friendly message', () =&gt; {
    const { container } = render(&lt;NotFound /&gt;);

    expect(container).toHaveTextContent('Sorry, this page does not exist');
  });
});
</code></pre>
<p>Letʼs imagine <code>Layout</code> does a lot more than in our example. If we run the 404 Not Found test right now, it will fail miserably, because thereʼs a lot more going on in <code>Layout</code> than just putting things in a <code>div</code>. But thatʼs all we need from it in our test, so letʼs do that!</p>
<h2>Mocking the wrapper component</h2>
<p>Not much to change in our original test, we just have to mock <code>Layout</code> so it only returns a <code>div</code> with the <code>children</code> passed inside. This can be easily achieved like so:</p>
<pre><code class="language-js">jest.mock('./path/to/layout', () =&gt; props =&gt; &lt;div {...props} /&gt;);
</code></pre>
<p>Thatʼs it! This will “render” in our test as:</p>
<pre><code class="language-jsx">&lt;div&gt;
  Sorry, this page does not exist. :(
&lt;/div&gt;
</code></pre>
<p>As a result, our test will pass happily, because we are only testing the <code>NotFound</code> page itself, not caring about what happens in <code>Layout</code>.</p>


<hr>
<ul><li>Next: <a href="/gatsby-env-vars/">Environment variables with Gatsby and Netlify</a></li><li>Previous: <a href="/npm/">Publishing an npm package</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /mock/ -->
  </body>
</html>
